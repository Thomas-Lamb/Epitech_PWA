import{c as L,s as T,d as f,t as k,a as g,u as q,b as U,r as j,o as E,e as C,f as b,g as h,h as M,F as $,i as V,T as I,L as J,j as z,k as F,E as X,l as H,m as K,n as W}from"../chunks/50dd3815.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();const Q={key:"Ngo9BigBOggjHTQxAR8/V1NHaF5cXmVCf1FpRmJGdld5fUVHYVZUTXxaS00DNHVRdkdgWH9fd3VQRmBeVUx2WUY="},B=L();T(B);const Y="modulepreload",G=function(e,t){return new URL(e,t).href},O={},m=function(t,s,o){if(!s||s.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(s.map(i=>{if(i=G(i,o),i in O)return;O[i]=!0;const r=i.endsWith(".css"),a=r?'[rel="stylesheet"]':"";if(!!o)for(let u=n.length-1;u>=0;u--){const _=n[u];if(_.href===i&&(!r||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const d=document.createElement("link");if(d.rel=r?"stylesheet":Y,r||(d.as="script",d.crossOrigin=""),d.href=i,document.head.appendChild(d),r)return new Promise((u,_)=>{d.addEventListener("load",u),d.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=i,window.dispatchEvent(r),!r.defaultPrevented)throw i})},l=f("IDB",{state:()=>{const t="quickmaint",s=window.indexedDB.open("quickmaint",4);return s.onerror=o=>{console.error(`Database error: ${o.target?.errorCode}`)},s.onsuccess=o=>{o.target.result},s.onupgradeneeded=o=>{const n=o.target.result;n.createObjectStore("tasks",{keyPath:"id"}),n.createObjectStore("todo",{keyPath:"id"}),n.createObjectStore("newNotifications",{keyPath:"id"}),n.createObjectStore("oldNotifications",{keyPath:"id"}),n.createObjectStore("requests"),n.createObjectStore("session")},{version:4,db_name:t}},actions:{async getAllFromTable(e){let t=this;return new Promise(function(s,o){let n=indexedDB.open(t.db_name,t.version);n.onsuccess=function(i){const r=i.target?.result,a=r.transaction(e,"readonly"),c=a.objectStore(e);c.getAll().onsuccess=function(d){s(d.target.result)},a.oncomplete=function(){r.close()}}})},async getStoreDataByKey(e,t){let s=this;return new Promise((o,n)=>{let i=indexedDB.open(s.db_name,s.version);i.onsuccess=function(r){const a=r.target.result,c=a.transaction(e,"readonly"),d=c.objectStore(e);d.get(t).onsuccess=function(u){o(u.target.result)},c.oncomplete=function(){a.close()}}})},async storeAllInTable(e,t){let s=this;return new Promise((o,n)=>{let i=indexedDB.open(s.db_name,s.version);i.onsuccess=function(r){const a=r.target.result,c=a.transaction(e,"readwrite"),d=c.objectStore(e);t.forEach(u=>{d.put(u)}),c.oncomplete=function(){a.close(),console.log("store dans index db finit !")},o(!0)}})},async upDateStoreInIndexedDbByKey(e,t,s){let o=this;return new Promise(function(n,i){let r=indexedDB.open(o.db_name,o.version);r.onsuccess=function(a){const c=a.target.result,d=c.transaction(t,"readwrite");d.objectStore(t).put(k(e),s),d.oncomplete=function(){c.close()},n(!0)}})},async upDateStoreInIndexedDb(e,t){let s=this;return new Promise(function(o,n){let i=indexedDB.open(s.db_name,s.version);i.onsuccess=function(r){const a=r.target.result,c=a.transaction(t,"readwrite");c.objectStore(t).put(k(e)),c.oncomplete=function(){a.close()},o(!0)}})},async deleteStoreBykey(e,t){let s=this;return new Promise(function(o,n){let i=indexedDB.open(s.db_name,s.version);i.onsuccess=function(r){const a=r.target.result,c=a.transaction(e,"readwrite");c.objectStore(e).delete(t),c.oncomplete=function(){a.close()}},o(!0)})}},getters:{}}),p=1,Z={data(){return{}},methods:{getStoreContent(e){return new Promise(function(t,s){let o=indexedDB.open("quickmaint",p);o.onsuccess=function(n){const i=n.target.result,r=i.transaction(e,"readonly"),a=r.objectStore(e);a.getAll().onsuccess=function(c){t(c.target.result)},r.oncomplete=function(){i.close()}}})},getStoreBykey(e,t){let s=this;return new Promise(function(o,n){let i=indexedDB.open("quickdoc",p);i.onsuccess=function(r){s.getStoreDataByKey(r,e,t).then(a=>{o(a)})}})},insertDataInStoreIndexedDb(e,t,s){return new Promise((o,n)=>{let i=indexedDB.open("quickdoc",p);i.onsuccess=function(r){const a=r.target.result,c=a.transaction(s,"readwrite"),d=c.objectStore(s);e.forEach(u=>{d.put(u,u.fileId?u.fileId:u.id)}),c.oncomplete=function(){a.close()},o(!0)}})},upDateStoreInIndexedDbByKey(e,t,s,o){let n=indexedDB.open("quickdoc",p);n.onsuccess=function(i){const r=i.target.result,a=r.transaction(s,"readwrite");a.objectStore(s).put(k(e),o),a.oncomplete=function(){r.close()}}},getStoreDataByKey(e,t,s){return new Promise((o,n)=>{const i=e.target.result,r=i.transaction(t,"readonly"),a=r.objectStore(t);a.get(s).onsuccess=function(c){o(c.target.result)},r.oncomplete=function(){i.close()}})},deleteStoreBykey(e,t){let s=indexedDB.open("quickdoc",p);s.onsuccess=function(o){const n=o.target.result,i=n.transaction(e,"readwrite");i.objectStore(e).delete(t),i.oncomplete=function(){n.close()}}},deleteStore(e){let t=indexedDB.open("quickdoc",p);t.onsuccess=function(s){const o=s.target.result,n=o.transaction(e,"readwrite");n.objectStore(e).clear(),n.oncomplete=function(){o.close()}}}}},S=f("appConfig",{state:()=>(l(),{messages:window.message,mix_config:window.mix_config,IDBManager:Z,isOnPage:!0}),actions:{setIsOnPage(e){this.isOnPage=e}},getters:{getIsOnPage(){return this.isOnPage},getMessages(){return this.messages},getMixConfig(){return this.mix_config},getIDBManager(){return this.IDBManager},getIDB(){return this.db}}}),y=f("notifications",{state:()=>({new_notifications:[],old_notifications:[],count:0,initialize_new_notif:!1,initialize_old_notif:!1}),actions:{init(){l().getAllFromTable("newNotifications").then(e=>{this.initialize_new_notif==!1&&(this.initialize_new_notif=!0,this.new_notifications=e,console.log("Index tasks loaded !",e))}),l().getAllFromTable("oldNotifications").then(e=>{this.initialize_old_notif==!1&&(this.initialize_old_notif=!0,this.old_notifications=e,console.log("Index todo loaded !",e))}),g.get(window.api_path+"notifications",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(e=>{let t=[];e.data.items.new.forEach(o=>{let n={id:o.id,title:JSON.parse(o.content)[0],content:JSON.parse(o.content)[1],label:o.label,deletable:o.deletable,read:!1};t.push(n)}),this.new_notifications=t,this.count=t.length,l().storeAllInTable("newNotifications",t);let s=[];e.data.items.old.forEach(o=>{let n={id:o.id,title:JSON.parse(o.content)[0],content:JSON.parse(o.content)[1],label:o.label,deletable:o.deletable,read:!1};s.push(n)}),this.old_notifications=s,l().storeAllInTable("oldNotifications",s)})},add(e){let t={id:e.id,title:JSON.parse(e.content)[0],content:JSON.parse(e.content)[1],label:e.label,deletable:e.deletable,read:!1};S().getIsOnPage==!1&&(console.log("notification en mode push"),new Notification(t.title)),this.new_notifications.push(t),this.count++,l().upDateStoreInIndexedDb(t,"newNotifications")},delete(e){this.new_notifications.every((t,s)=>t.id==e.id?(console.log(this.new_notifications.splice(s,1)),l().deleteStoreBykey("newNotifications",e.id),!1):!0),this.old_notifications.every((t,s)=>t.id==e.id?(console.log(this.old_notifications.splice(s,1)),l().deleteStoreBykey("oldNotifications",e.id),!1):!0),g.delete(window.api_path+"notifications/"+e.id,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}})},remove(e){},update(e){},validAll(){let e=[];this.new_notifications.forEach(t=>{e.push(t.id),l().deleteStoreBykey("newNotifications",t.id),l().upDateStoreInIndexedDb(t,"oldNotifications")}),g.post(window.api_path+"notifications/valideNotifications",{notificationsId:e},{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}),this.count=0},validAllFinish(){let e=this.new_notifications.concat(this.old_notifications);this.new_notifications=[],this.old_notifications=e}},getters:{getAllNewNotifications(){return[].concat(this.new_notifications).reverse()},getAllOldNotifications(){return[].concat(this.old_notifications).reverse()},getCount(){return this.count}}}),ee={template:"<div>404</div>"},te=[{path:"/",component:()=>m(()=>import("../chunks/a93f96d6.js"),["..\\chunks\\a93f96d6.js","..\\chunks\\50dd3815.js","..\\chunks\\5b39eb61.js"],import.meta.url),name:"home",redirect:{name:"todo"},children:[{path:"tasks",component:()=>m(()=>import("../chunks/b0525a4b.js"),["..\\chunks\\b0525a4b.js","..\\chunks\\cfadf8df.js","..\\chunks\\50dd3815.js"],import.meta.url),name:"tasks"},{path:"todo",component:()=>m(()=>import("../chunks/185f28ed.js"),["..\\chunks\\185f28ed.js","..\\chunks\\cfadf8df.js","..\\chunks\\50dd3815.js"],import.meta.url),name:"todo"},{path:"notifications",component:()=>m(()=>import("../chunks/1f15f0e2.js"),["..\\chunks\\1f15f0e2.js","..\\chunks\\50dd3815.js"],import.meta.url),name:"notifications",beforeEnter:(e,t,s)=>{y().validAll(),s()}}]},{path:"/login",name:"login",component:()=>m(()=>import("../chunks/7da7b73f.js"),["..\\chunks\\7da7b73f.js","..\\chunks\\50dd3815.js","..\\chunks\\5b39eb61.js"],import.meta.url),beforeEnter:(e,t,s)=>{navigator.onLine?sessionStorage.getItem("token")===null?s():s({path:"/"}):s({path:"/"})}},{path:"/:pathMatch(.*)*",name:"notFound",component:ee}],D=f("tasks",{state:()=>({tasks:[],myTasks:[],length:0,initialize_tasks:!1,initialize_todo:!1}),actions:{init(){l().getAllFromTable("tasks").then(e=>{this.initialize_tasks==!1&&(this.initialize_tasks=!0,this.tasks=e,console.log("Index tasks loaded !",e))}),l().getAllFromTable("todo").then(e=>{this.initialize_todo==!1&&(this.initialize_todo=!0,this.myTasks=e,console.log("Index todo loaded !",e))}),g.get(window.api_path+"tasks/getmytasks",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(e=>{let t=[];return e.data.my_tasks.forEach(s=>{let o=JSON.parse(s),n={code:o.code,id:o.id,designation:o.designation,status:o.status_name,agent:o.responsible_name,priority:o.priority_name,status_color:o.status_color};t.push(n)}),this.initialize_todo=!0,this.myTasks=t,console.log("axios tasks loaded !",t),t}).then(e=>{l().storeAllInTable("todo",e)}),g.get(window.api_path+"tasks/grid/1",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(e=>{let t=[];return console.log(e),e.data.items.forEach(s=>{let o=JSON.parse(s),n={code:o.code,id:o.id,designation:o.designation,status:o.status_name,agent:o.responsible_name,priority:o.priority_name,status_color:o.status_color};t.push(n)}),this.initialize_tasks=!0,this.tasks=t,console.log("axios tasks loaded !",t),t}).then(e=>{l().storeAllInTable("tasks",e)})},add(e){let t={code:e.code,id:e.id,designation:e.designation,status:e.status_name,agent:e.responsible_name,priority:e.priority_name,status_color:e.status_color};this.tasks.push(t),l().upDateStoreInIndexedDb(t,"tasks")},assign(e){let t={code:e.code,id:e.id,designation:e.designation,status:e.status_name,agent:e.responsible_name,priority:e.priority_name,status_color:e.status_color};this.myTasks.push(t),l().upDateStoreInIndexedDb(t,"todo")},remove(e){this.tasks.forEach((t,s)=>{t.id==e.id&&(this.tasks.splice(s,1),l().deleteStoreBykey("tasks",e.id))}),this.myTasks.forEach((t,s)=>{t.id==e.id&&(this.myTasks.splice(s,1),l().deleteStoreBykey("todo",e.id))})},unassign(e){this.myTasks.forEach((t,s)=>{if(t.id==e.id){console.log("splice !",this.myTasks.splice(s,1)),l().deleteStoreBykey("todo",e.id);return}})},update(e){this.myTasks.forEach((t,s)=>{t.id==e.id&&(this.myTasks[s].code=e.code,this.myTasks[s].designation=e.designation,this.myTasks[s].status=e.status_name,this.myTasks[s].agent=e.responsible_name,this.myTasks[s].priority=e.priority_name,this.myTasks[s].status_color=e.status_color,l().upDateStoreInIndexedDb(this.myTasks[s],"todo"))}),this.tasks.forEach((t,s)=>{t.id==e.id&&(this.tasks[s].code=e.code,this.tasks[s].designation=e.designation,this.tasks[s].status=e.status_name,this.tasks[s].agent=e.responsible_name,this.tasks[s].priority=e.priority_name,this.tasks[s].status_color=e.status_color,l().upDateStoreInIndexedDb(this.tasks[s],"tasks"))})}},getters:{getAllTasks(){return this.tasks},getLength(){return this.length},getMyTasks(){return this.myTasks}}});let w={qbv2_url:"https://test2-qbv2.quickbrain.net",qbv2_proxy:"true",qbv2_port:""};window.mix_config=JSON.parse('{"MIX_APP_URL":"'+w.qbv2_url+'","MIX_ECHO_SERVER_URL":"'+w.qbv2_url+'","MIX_ECHO_SERVER_PROXY":'+w.qbv2_proxy+',"MIX_ECHO_SERVER_PORT":"'+w.qbv2_port+'","MIX_APP_CHANNEL_ID":"base64:KGbyb8kswAOKJRp0kvOW/Ouokgv6ZN+VVvChS7EEWjU=","MIX_APP_MAX_FILES_QUICK_UPLOAD":5,"HAS_GOOGLE_OAUTH":false,"HAS_AZURE_OAUTH":false,"MATOMO_ENABLED":0,"MATOMO_HOST":"","MATOMO_SITEID":1,"MATOMO_TRACKER":"matomo,"}');window.axios=g.create({baseURL:window.mix_config.MIX_APP_URL});window.UUID=q;const x=f("login",{state:()=>({isAuth:sessionStorage.getItem("isAuth")?sessionStorage.getItem("isAuth"):!1,token:sessionStorage.getItem("token")?sessionStorage.getItem("token"):null,baseUrl:window.mix_config.MIX_APP_URL+"/api",toastBaseError:null,user:sessionStorage.getItem("user")?JSON.parse(sessionStorage.getItem("user")):[],permissions:sessionStorage.getItem("permissions")?JSON.parse(sessionStorage.getItem("permissions")):[],schedulerParameters:sessionStorage.getItem("schedulerParameters")?JSON.parse(sessionStorage.getItem("schedulerParameters")):null,externalSearch:sessionStorage.getItem("externalSearch")?JSON.parse(sessionStorage.getItem("externalSearch")):{},listenerPermission:null,mixConfig:window.mix_config,dataUser:{token:null},screen:"",secondAuthToken:null,router:window.router,showSecondAuthPopup:!1,showPasswordNeedUpdate:!1,showPasswordValidationDateExpired:!1}),actions:{isLogIn(){return this.$state.isAuth!==!1},checkUserIsLog(e){return this.dataUser.token=e},storeSessionInIndexDb(){const e=l();e.upDateStoreInIndexedDbByKey(this.isAuth,"session","isauth"),e.upDateStoreInIndexedDbByKey(this.token,"session","token")},checkSessionInIndexDb(){const e=l();e.getStoreDataByKey("session","isauth").then(t=>{console.log(t),this.isAuth=t,sessionStorage.setItem("isAuth","true")}),e.getStoreDataByKey("session","token").then(t=>{console.log(t),this.token=t,this.token!=null&&(sessionStorage.setItem("token",JSON.stringify(this.token)),window.router.push({name:"todo"}))})},authUser(e){localStorage.clear(),this.$state.isAuth=!0,this.$state.token=e.success.token,this.$state.user=e.user,this.$state.permissions=e.permissions,this.$state.schedulerParameters=e.schedulerParameters,sessionStorage.setItem("token",e.success.token),sessionStorage.setItem("user",JSON.stringify(e.user)),sessionStorage.setItem("roles",JSON.stringify(e.roles)),sessionStorage.setItem("isAuth","1"),sessionStorage.setItem("version",JSON.stringify(e.versions)),sessionStorage.setItem("permissions",JSON.stringify(e.permissions)),sessionStorage.setItem("schedulerParameters",JSON.stringify(e.schedulerParameters)),sessionStorage.setItem("qrcodemode","drawe"),window.innerWidth<540&&sessionStorage.setItem("screen","mobile"),window.innerWidth>=540&&window.innerWidth<=1180&&sessionStorage.setItem("screen","tablette")},logoutUser(){localStorage.clear(),navigator.onLine?(this.$state.isAuth=!1,this.$state.token=null,this.$state.user=null,this.$state.permissions=null,this.$state.listenerPermission=null,this.$state.schedulerParameters=null,sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),sessionStorage.removeItem("roles"),sessionStorage.removeItem("isAuth"),sessionStorage.removeItem("version"),sessionStorage.removeItem("permissions"),sessionStorage.removeItem("schedulerParameters"),sessionStorage.removeItem("externalSearch"),sessionStorage.removeItem("qrcodemode"),sessionStorage.removeItem("externalSearch"),sessionStorage.removeItem("screen"),sessionStorage.clear()):sessionStorage.setItem("isAuth","0"),A().leaveAll(),window.router.push({name:"login"})},cleanExternalSearch(){this.removeExternalSearch()},removeExternalSearch(){this.$state.externalSearch={},sessionStorage.removeItem("externalSearch")},secondAuthLogin(e){let t=e.dataSource;this.authUser(t),typeof t.user.date_terms_validation=="object"||typeof t.user.ip_terms_validation=="object"?(sessionStorage.removeItem("isAuth"),e.router.push({name:"rgpd"})):(e.spinnerOn(),this.$state.externalSearch&&this.$state.externalSearch.type&&this.$state.externalSearch.content?(e.spinnerOff(),this.$state.externalSearch.type==="centralPanels"&&setTimeout(()=>{})):this.router.push({name:"Loading"}).then(()=>{e.spinnerOff()}))},setShowSecondAuthPopup(e){this.showSecondAuthPopup=e},login(e,t,s,o){t(),navigator.onLine&&g.post(window.mix_config.MIX_APP_URL+"/api/login",{login:e.login,password:e.password}).then(({data:n})=>{if(n.passwordNeedUpdate){this.showPasswordNeedUpdate=!0;return}if(n.validationDateExpired){this.showPasswordValidationDateExpired=!0;return}n.tokenSecondAuth?(this.setShowSecondAuthPopup(!0),this.secondAuthToken=n.tokenSecondAuth):(this.authUser(n),this.checkUserIsLog(n.success.token),typeof n.user.date_terms_validation=="object"||typeof n.user.ip_terms_validation=="object"?(sessionStorage.removeItem("isAuth"),this.router?.push({name:"rgpd"})):this.$state.externalSearch&&this.$state.externalSearch.type&&this.$state.externalSearch.content?(s(),this.$state.externalSearch.type==="centralPanels"?setTimeout(()=>{location.href=window.mix_config.MIX_APP_URL+"/#/"+this.$state.externalSearch.type}):location.href=window.mix_config.MIX_APP_URL+"/#/"+this.$state.externalSearch.type):(this.storeSessionInIndexDb(),A(),window.router.push({name:"todo"}).then(()=>{s()})),s())}).catch(n=>{n&&(console.error(n.message),o(),s())})}},getters:{getUser(){return this.user}}}),A=f("laravelEcho",{state:()=>({echo:window.Echo,echoListenTask:null,echoListenNotifications:null,tasksStore:D(),notificationsStore:y()}),actions:{init_private(){window.Echo.connector.options.auth.headers.Authorization="Bearer "+sessionStorage.getItem("token"),this.echo=window.Echo,this.echoListenTask=window.Echo.private("channel-MCB.tasks."+x().getUser.id).listen("\\Quickbrain\\Events\\ModelChangeBroadcast",function(e){let t=D();switch(console.log(e),e.state){case"created":t.add(e.model);break;case"assign":t.assign(e.model);break;case"unassign":t.unassign(e.model);break;case"updated":t.update(e.model);break;case"deleted":t.remove(e.model);break}}),this.echoListenNotifications=window.Echo.private("notifications."+x().getUser.id).listen("\\Quickbrain\\Events\\EventNotifications",function(e){let t=y();console.log(e),t.add(e.notification)})},leave(e){this.echo.leave(e)},leaveAll(){this.leave("channel_task")},add(e){let t={code:eventTask.code,id:eventTask.id,designation:eventTask.designation,status:eventTask.status_name,agent:eventTask.responsible_name,priority:eventTask.priority_name,status_color:eventTask.status_color};this.tasks.push(t)}},getters:{}}),se=V("div",{id:"spinnerApp"},null,-1),oe=U({__name:"App",setup(e){let t={X:"Center",Y:"Top"},s={X:"Right",Y:"Top"},o={show:{effect:"Fade Zoom In"},hide:{effect:"Slide Left Out"}},n=[{model:{content:"refresh"},click:null},{model:{content:"reply"}}],i=0;return window.onfocus=function(){console.log("sur la page"),S().setIsOnPage(!0)},window.onblur=function(){console.log("en dehors de la page"),S().setIsOnPage(!1)},A(),S(),x().storeSessionInIndexDb(),(r,a)=>{const c=j("router-view");return E(),C($,null,[se,b(h(I),{ref:"codeEmpty",id:"main_toast",title:"Error",position:h(s),cssClass:"e-toast-danger"},null,8,["position"]),b(h(I),{ref:"codeEmpty",id:"center_toast",title:"Success",showCloseButton:!0,position:h(t),cssClass:"e-toast-danger"},null,8,["position"]),b(h(I),{ref:"swToast",id:"sw_Toast",position:h(t),showCloseButton:!0,animation:h(o),buttons:h(n)},null,8,["position","animation","buttons"]),(E(),M(c,{key:h(i)}))],64)}}});class ne extends J{get(t,s=null,o=super.getLocale()){let n=o+".override",i=this.getFallback();return this.setFallback(void 0),super.has(t,n)?(this.setFallback(i),super.get(t,s,n)):(this.setFallback(i),super.get(t,s,o))}}function ie(){console.log("swRegister");let e="quickmaint-sw.js";navigator.serviceWorker.register(e,{ready(){console.log("App is being served from cache by a service worker.")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration"),console.error(t)}}).then(t=>{console.log("SW registered!",t)}).catch(t=>console.log("Boo!",t))}z(Q.key);window.io=F;let re=window.default_locale?window.default_locale:navigator.language.substring(0,2),N="https://test2-qbv2.quickbrain.net",R=N+"/api/";window.api_path=R;navigator.onLine&&ie();await g.get(R+"main_data").then(e=>{window.message=e.data.messages,window.mix_config=e.data.mix_config;let t=N;window.Echo=new X({broadcaster:"socket.io",host:t,authEndpoint:"/api/broadcasting/auth",transports:["websocket","polling","flashsocket"]}),console.log("MAIN DATA !!!")});let ae=new ne({messages:window.message,locale:re,fallback:"en"});window.trans=ae;const ce=B,v=H(oe),P=K({history:W(),routes:te});window.router=P;P.beforeEach((e,t,s)=>{if(navigator.onLine)if(sessionStorage.getItem("token")===null&&e.path!=="/login"){s({path:"/login"});return}else s()});v.use(ce);v.use(P);v.mount("#app");function le(){if(!("serviceWorker"in navigator))throw new Error("No support for service worker");if(!("Notification"in window))throw new Error("No support for notification API")}async function de(){await Notification.requestPermission()!=="granted"&&console.log("Permission not granted")}le();de();export{y as a,A as b,D as c,S as d,x as u};
